# *** header ***
# 
# WARNING: DO NOT MODIFY THIS FILE.
# 
# This file has been auto-generated by install.pl. If you wish to override the attributes
# set in this file for various paths, repositories, etc., you can do so by editing
# setup.override.yml. If you wish to change the set of services managed by this
# project, you should run either 'pbdb update project' or 'macrostrat update project'.
# You will be prompted to choose a project configuration, and this file will then be
# regenerated from the template file config/docker-compose-template.yml.
# The corresponding file docker-compose-override.yml will also be regenerated, and your
# changes if any will be saved. If you wish to regenerate this file, you can run
# 'pbdb update setup' or 'macrostrat update setup'.
# 
# The following entries specify actions that must be taken to properly set up the file tree for the
# Paleobiology Database and/or Macrostrat services. The entries each have one of the following
# types:
# 
# repository            A Git repository that must be cloned from a remote repository
# dir                        A directory that must be created
# symlink                A symbolic link that must be set up

setup:
    
  # Paths required for nginx
  
  - type: dir
    path: certs
  - type: dir
    path: certs/challenge
  - type: dir
    path: logs/nginx
  
# *** paleobiodb ***
setup:
  
  # Static files for the paleobiology database
  
  - type: repository
    path: frontend/pbdb-main
    origin: pbdb-main.git
    component: paleobiodb
    container: nginx
  - type: repository
    path: frontend/navigator
    origin: navigator.git
    component: paleobiodb
    container: nginx
  - type: symlink
    path: frontend/pbdb-main/navigator
    target: ../navigator
    component: paleobiodb
  - type: dir
    path: images
    component: paleobiodb
  - type: dir
    path: archives
    component: paleobiodb
  
  # Main API for the paleobiology database
  
  - type: repository
    path: frontend/pbapi
    rename-from: frontend/pbdb-new
    origin: data_service.git
    component: paleobiodb
    container: pbapi
  - type: dir
    component: paleobiodb
    path: logs/pbapi
    rename-from: logs/pbdb-new
  
  # Classic interface to the paleobiology database
  
  - type: repository
    path: frontend/classic
    rename-from: frontend/pbdb-classic
    origin: classic.git
    component: paleobiodb
    container: classic
  - type: symlink
    path: frontend/pbdb-main/JavaScripts
    target: ../classic/public/classic_js/
    component: paleobiodb
  - type: symlink
    path: frontend/pbdb-main/StyleSheets
    target: ../classic/public/classic_css/
    component: paleobiodb
  - type: dir
    path: frontend/classic/saves
    chmod: og+rX
    component: paleobiodb
  # - type: dir
  #   path: frontend/classic/captcha/temp
  #   component: paleobiodb
  - type: repository
    path: frontend/wing
    rename-from: frontend/pbdb-wing
    origin: Wing.git
    container: classic
    component: paleobiodb
  - type: dir
    path: logs/classic
    rename-from: logs/pbdb-classic
    component: paleobiodb
  - type: dir
    path: taxa_downloads
    component: paleobiodb
  - type: dir
    path: datalogs
    component: paleobiodb
  
  # Other web applications for the paleobiology database.
  
  - type: dir
    path: frontend/pbdb-app
    component: paleobiodb
  - type: repository
    path: frontend/pbdb-app/common
    origin: app_common.git
    component: paleobiodb
    container: nginx,classic
  - type: repository
    path: frontend/pbdb-app/test
    origin: test_app.git
    component: paleobiodb
    container: nginx,classic
  - type: repository
    path: frontend/pbdb-app/archive
    origin: app-archive.git
    component: paleobiodb
    container: nginx,classic
  - type: repository
    path: frontend/pbdb-app/resource-sub
    origin: resource_sub.git
    component: paleobiodb
    container: nginx,classic
  - type: repository
    path: frontend/pbdb-app/specimen-entry
    origin: specimen_app.git
    component: paleobiodb
    container: nginx,classic

# *** earthlife ***
setup:
  
  # Earthlife static files and api
  
  - type: repository
    path: frontend/earthlife
    origin: https://github.com/EarthLifeConsortium/elc_api.git
    component: earthlife
    container: nginx,earthlife
  - type: dir
    path: logs/earthlife

# *** macrostrat ***
# *** rockd ***
# *** mibasin ***
